import{d as Q,j as c,k as X,m as Y,c as d,a as o,u as t,h as Z,w as a,b as s,g as n,n as I,p as ee,v as te,q as D,o as u,F as C,r as P,t as i,l as F,f as x,i as se,A as le,e as oe,s as ae,y as re,x as q}from"./app-DbnlkrMv.js";import{_ as m}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BWY_apWj.js";import{_ as ne,a as ie,b as ue,c as de}from"./CardTitle.vue_vue_type_script_setup_true_lang-CeUdLFNC.js";import{_ as pe}from"./CardDescription.vue_vue_type_script_setup_true_lang-D3btJlsr.js";import{_ as U,a as N,b as W,c as A,d as me}from"./DialogTitle.vue_vue_type_script_setup_true_lang-ovzLtdsZ.js";import{_ as B,a as E}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DLnQuMx4.js";import{_ as M}from"./Input.vue_vue_type_script_setup_true_lang-Bd-3t3Tw.js";import{_ as S}from"./Label.vue_vue_type_script_setup_true_lang-QaAtDQn8.js";import{_ as fe}from"./AppLayout.vue_vue_type_script_setup_true_lang-CKPnZjkL.js";import{P as ce,a as _e,T as ve}from"./trash-2-eQeasuJM.js";import"./useForwardPropsEmits-BemXgQIs.js";import"./index-Bpt89bPj.js";import"./useForwardExpose-C_L76eIi.js";import"./VisuallyHidden-BYSOKA-6.js";import"./index-n1LTNkzM.js";import"./createLucideIcon-Cu1DnD-A.js";const xe={class:"flex h-full flex-1 flex-col gap-4 p-4"},ye={class:"flex items-center justify-between"},ge={class:"p-4 flex gap-3 items-center"},he={class:"overflow-x-auto"},be={class:"w-full border-collapse text-left text-sm"},we={class:"px-4 py-3"},ke={class:"px-4 py-3"},$e={class:"px-4 py-3"},Ce={key:0},Se=["src"],Ve={key:1},Ie={class:"px-4 py-3"},Pe={class:"px-4 py-3"},Te={class:"px-4 py-3 text-right space-x-2"},De={key:0,class:"border-b border-border"},Fe={key:0,class:"flex items-center justify-between mt-6 pt-6 border-t border-border"},qe={class:"text-sm text-muted-foreground"},Ue={class:"flex gap-2"},Ne={class:"pt-2"},We={class:"p-2 max-w-xl"},Ae={class:"space-y-4"},Be={class:"flex flex-col space-y-2"},Ee=["value"],Me={key:0,class:"text-sm text-destructive mt-1"},je={class:"flex flex-col space-y-2"},ze={key:0,class:"text-sm text-destructive mt-1"},Le={class:"flex flex-col space-y-2"},Ke={key:0,class:"text-sm text-destructive mt-1"},Oe={class:"flex flex-col space-y-2"},He={key:0,class:"text-sm text-destructive mt-1"},Re={class:"text-sm"},mt=Q({__name:"Index",props:{items:{},customers:{},filters:{}},setup(j){const _=j,T=ae().props.value,f=_.items,z=_.customers,v=c(T?.filters?.q??_.filters?.q??""),y=c(T?.filters?.per_page??_.filters?.per_page??_.items.per_page??10),h=c(!1),r=X({customer_id:"",supplier_name:"",weight:"",photo:null}),b=c(!1),L=async()=>{if(!r.customer_id){r.setError("customer_id","Please select a customer");return}if(!r.supplier_name){r.setError("supplier_name","Supplier name is required");return}if(!r.weight){r.setError("weight","Weight is required");return}b.value=!0;try{r.post("/warehouse/intake",{preserveScroll:!0,forceFormData:!0}),r.reset()}finally{b.value=!1,h.value=!1}},K=p=>{const e=p.target;r.photo=e.files&&e.files.length?e.files[0]:null},O=[{title:"Warehouse",href:"/warehouse"}],w=c(!1),g=c(null),k=c(!1),H=re(()=>{const p=g.value;return p===null?"-":f.data.find(l=>l.id===p)?.shipment?.shipment_code??"-"}),R=p=>{g.value=p,w.value=!0},G=async()=>{g.value&&(k.value=!0,await q.delete(`/warehouse/${g.value}`,{preserveScroll:!0}),k.value=!1,w.value=!1,g.value=null)},$=()=>{const p={};v.value&&(p.q=v.value),y.value&&(p.per_page=y.value),q.get("/warehouse",p,{preserveState:!0,replace:!0})},J=()=>{v.value="",y.value=_.items.per_page??10,$()};let V=null;return Y(v,()=>{V&&window.clearTimeout(V),V=window.setTimeout(()=>$(),500)}),(p,e)=>(u(),d(C,null,[o(t(Z),{title:"Warehouse Inventory"}),o(fe,{breadcrumbs:O},{default:a(()=>[s("div",xe,[s("div",ye,[e[9]||(e[9]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Warehouse Inventory"),s("p",{class:"text-muted-foreground"},"Manage items in the warehouse")],-1)),o(t(m),{onClick:e[0]||(e[0]=l=>h.value=!0)},{default:a(()=>[o(t(ce),{class:"mr-2 h-4 w-4"}),e[8]||(e[8]=n(" Add Intake ",-1))]),_:1})]),o(t(ne),null,{default:a(()=>[o(t(ie),null,{default:a(()=>[o(t(ue),null,{default:a(()=>[...e[10]||(e[10]=[n("Inventory",-1)])]),_:1}),o(t(pe),null,{default:a(()=>[...e[11]||(e[11]=[n("Items received into warehouse",-1)])]),_:1})]),_:1}),s("div",ge,[I(s("input",{type:"search","onUpdate:modelValue":e[1]||(e[1]=l=>v.value=l),onKeyup:ee($,["enter"]),placeholder:"Search warehouse...",class:"rounded border px-3 py-2 w-64"},null,544),[[te,v.value]]),I(s("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>y.value=l),class:"rounded border px-3 py-2"},[...e[12]||(e[12]=[s("option",{value:10},"10",-1),s("option",{value:25},"25",-1),s("option",{value:50},"50",-1),s("option",{value:100},"100",-1)])],512),[[D,y.value,void 0,{number:!0}]]),o(t(m),{onClick:$},{default:a(()=>[...e[13]||(e[13]=[n("Apply",-1)])]),_:1}),o(t(m),{variant:"outline",onClick:J},{default:a(()=>[...e[14]||(e[14]=[n("Clear",-1)])]),_:1})]),o(t(de),{class:"pb-8"},{default:a(()=>[s("div",he,[s("table",be,[e[16]||(e[16]=s("thead",null,[s("tr",{class:"border-b border-border bg-muted/50"},[s("th",{class:"px-4 py-3 font-medium"},"Shipment"),s("th",{class:"px-4 py-3 font-medium"},"Shelf"),s("th",{class:"px-4 py-3 font-medium"},"Photo"),s("th",{class:"px-4 py-3 font-medium"},"Intake By"),s("th",{class:"px-4 py-3 font-medium"},"Intake Time"),s("th",{class:"px-4 py-3 font-medium text-right"},"Actions")])],-1)),s("tbody",null,[(u(!0),d(C,null,P(t(f).data,l=>(u(),d("tr",{key:l.id,class:"border-b border-border hover:bg-muted/30 transition-colors"},[s("td",we,i(l.shipment?.shipment_code||"-"),1),s("td",ke,i(l.shelf||"-"),1),s("td",$e,[l.photo_url?(u(),d("div",Ce,[s("img",{src:l.photo_url,class:"h-12 w-auto rounded",alt:"photo"},null,8,Se)])):(u(),d("div",Ve,i(l.photo_path?"View":"-"),1))]),s("td",Ie,i(l.intake_by?.name||"-"),1),s("td",Pe,i(new Date(l.intake_time||l.created_at).toLocaleString()),1),s("td",Te,[o(t(F),{href:`/warehouse/${l.id}/edit`},{default:a(()=>[o(t(m),{variant:"outline",size:"sm"},{default:a(()=>[o(t(_e),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"]),o(t(m),{variant:"destructive",size:"sm",onClick:Je=>R(l.id)},{default:a(()=>[o(t(ve),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]))),128)),t(f).data.length===0?(u(),d("tr",De,[...e[15]||(e[15]=[s("td",{colspan:"6",class:"px-4 py-8 text-center text-muted-foreground"},"No items found.",-1)])])):x("",!0)])])]),t(f).last_page>1?(u(),d("div",Fe,[s("div",qe,"Showing "+i(t(f).data.length)+" of "+i(t(f).total)+" items",1),s("div",Ue,[(u(!0),d(C,null,P(t(f).links,l=>(u(),se(t(F),{key:l.label,href:l.url||"#",class:le(["px-3 py-1 rounded border",l.active?"bg-primary text-primary-foreground border-primary":"bg-background border-border hover:bg-muted",l.url?"":"opacity-50 cursor-not-allowed"]),disabled:!l.url},{default:a(()=>[n(i(l.label.replace(/«|»/g,"")),1)]),_:2},1032,["href","class","disabled"]))),128))])])):x("",!0)]),_:1})]),_:1}),o(t(U),{open:h.value,"onUpdate:open":e[6]||(e[6]=l=>h.value=l)},{default:a(()=>[o(t(N),{class:"sm:max-w-2xl"},{default:a(()=>[o(t(W),null,{default:a(()=>[o(t(A),null,{default:a(()=>[...e[17]||(e[17]=[n("Warehouse Intake",-1)])]),_:1})]),_:1}),s("div",Ne,[s("div",We,[s("div",Ae,[s("div",Be,[o(t(S),null,{default:a(()=>[...e[18]||(e[18]=[n("Customer",-1)])]),_:1}),I(s("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>t(r).customer_id=l),class:"w-full rounded border px-3 py-2"},[e[19]||(e[19]=s("option",{value:""},"Select customer",-1)),(u(!0),d(C,null,P(t(z),l=>(u(),d("option",{key:l.id,value:l.id},i(l.name),9,Ee))),128))],512),[[D,t(r).customer_id]]),t(r).errors.customer_id?(u(),d("p",Me,i(t(r).errors.customer_id),1)):x("",!0)]),s("div",je,[o(t(S),null,{default:a(()=>[...e[20]||(e[20]=[n("Supplier Name",-1)])]),_:1}),o(t(M),{modelValue:t(r).supplier_name,"onUpdate:modelValue":e[4]||(e[4]=l=>t(r).supplier_name=l)},null,8,["modelValue"]),t(r).errors.supplier_name?(u(),d("p",ze,i(t(r).errors.supplier_name),1)):x("",!0)]),s("div",Le,[o(t(S),null,{default:a(()=>[...e[21]||(e[21]=[n("Weight",-1)])]),_:1}),o(t(M),{modelValue:t(r).weight,"onUpdate:modelValue":e[5]||(e[5]=l=>t(r).weight=l),type:"number"},null,8,["modelValue"]),t(r).errors.weight?(u(),d("p",Ke,i(t(r).errors.weight),1)):x("",!0)]),s("div",Oe,[o(t(S),null,{default:a(()=>[...e[22]||(e[22]=[n("Photo",-1)])]),_:1}),s("input",{type:"file",accept:"image/*",onChange:K,class:"w-full rounded border px-3 py-2"},null,32),t(r).errors.photo?(u(),d("p",He,i(t(r).errors.photo),1)):x("",!0)])])])]),o(t(B),null,{default:a(()=>[o(t(E),{"as-child":""},{default:a(()=>[o(t(m),{disabled:b.value,onClick:oe(L,["prevent"])},{default:a(()=>[n(i(b.value?"Submitting...":"Receive Parcel"),1)]),_:1},8,["disabled"]),o(t(m),{variant:"secondary"},{default:a(()=>[...e[23]||(e[23]=[n("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),o(t(U),{open:w.value,"onUpdate:open":e[7]||(e[7]=l=>w.value=l)},{default:a(()=>[o(t(N),{class:"sm:max-w-md"},{default:a(()=>[o(t(W),{class:"space-y-3"},{default:a(()=>[o(t(A),null,{default:a(()=>[...e[24]||(e[24]=[n("Delete item",-1)])]),_:1}),o(t(me),null,{default:a(()=>[...e[25]||(e[25]=[n("Are you sure you want to remove this item from inventory? This action cannot be undone.",-1)])]),_:1})]),_:1}),s("div",Re,[s("p",null,[e[26]||(e[26]=s("strong",null,"Item:",-1)),n(" "+i(H.value),1)])]),o(t(B),{class:"gap-2 mt-4"},{default:a(()=>[o(t(E),{"as-child":""},{default:a(()=>[o(t(m),{variant:"secondary"},{default:a(()=>[...e[27]||(e[27]=[n("Cancel",-1)])]),_:1})]),_:1}),o(t(m),{variant:"destructive",disabled:k.value,onClick:G},{default:a(()=>[n(i(k.value?"Deleting...":"Delete"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1})],64))}});export{mt as default};
