import{d as ee,j as f,k as te,m as se,c as d,a as l,u as t,h as le,w as r,b as s,g as n,n as T,p as oe,v as re,q as j,o as u,F as C,r as U,t as i,l as z,f as _,i as ae,A as ne,e as ue,s as ie,x as S,y as de}from"./app-ZoMEvklz.js";import{_ as m}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CSrLiVPg.js";import{_ as pe,a as me,b as fe,c as ce}from"./CardTitle.vue_vue_type_script_setup_true_lang-FJdKs83x.js";import{_ as _e}from"./CardDescription.vue_vue_type_script_setup_true_lang-DH2VU6NV.js";import{_ as D,a as q,b as E,c as N}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BUng5hS9.js";import{_ as W,a as A}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BRSR6aJy.js";import{_ as ve}from"./DialogDescription.vue_vue_type_script_setup_true_lang-n_4U53fr.js";import{_ as M}from"./Input.vue_vue_type_script_setup_true_lang-B8cJiyck.js";import{_ as V}from"./Label.vue_vue_type_script_setup_true_lang-DGRFnD30.js";import{_ as xe}from"./AppLayout.vue_vue_type_script_setup_true_lang-D_gnfnQh.js";import{P as ye,a as he,T as ge}from"./trash-2-CaxbCNwq.js";import"./useForwardPropsEmits-CGUFY8cM.js";import"./index-CsgO9ZAL.js";import"./useForwardExpose-CuBcqR0n.js";import"./VisuallyHidden-BGncnRsO.js";import"./index-n1LTNkzM.js";import"./createLucideIcon-Db4teo7l.js";const be={class:"flex h-full flex-1 flex-col gap-4 p-4"},we={class:"flex items-center justify-between"},ke={class:"p-4 flex gap-3 items-center"},$e={class:"overflow-x-auto"},Ce={class:"w-full border-collapse text-left text-sm"},Se={class:"px-4 py-3"},Ve={class:"px-4 py-3"},Pe={class:"px-4 py-3"},Ie={key:0},Fe=["src","onClick"],Te={key:1},Ue={class:"px-4 py-3"},De={class:"px-4 py-3"},qe={class:"px-4 py-3 text-right space-x-2"},Ee={key:0,class:"border-b border-border"},Ne={key:0,class:"flex items-center justify-between mt-6 pt-6 border-t border-border"},We={class:"text-sm text-muted-foreground"},Ae={class:"flex gap-2"},Be={class:"pt-2"},je={class:"p-2 max-w-xl"},ze={class:"space-y-4"},Me={class:"flex flex-col space-y-2"},Le=["value"],Oe={key:0,class:"text-sm text-destructive mt-1"},Ke={class:"flex flex-col space-y-2"},He={key:0,class:"text-sm text-destructive mt-1"},Re={class:"flex flex-col space-y-2"},Ge={key:0,class:"text-sm text-destructive mt-1"},Je={class:"flex flex-col space-y-2"},Qe={key:0,class:"text-sm text-destructive mt-1"},Xe={class:"text-sm"},Ye={class:"flex items-center justify-center bg-muted rounded-lg p-4 min-h-80"},Ze=["src"],yt=ee({__name:"Index",props:{items:{},customers:{},filters:{}},setup(L){const v=L,B=ie().props.value,c=v.items,O=v.customers,x=f(B?.filters?.q??v.filters?.q??""),y=f(B?.filters?.per_page??v.filters?.per_page??v.items.per_page??10),w=f(!1),P=f(!1),I=f(null),K=p=>{I.value=p,P.value=!0},a=te({customer_id:"",supplier_name:"",weight:"",photo:null}),h=f(!1),H=async()=>{if(!a.customer_id){a.setError("customer_id","Please select a customer");return}if(!a.supplier_name){a.setError("supplier_name","Supplier name is required");return}if(!a.weight){a.setError("weight","Weight is required");return}h.value=!0;try{a.post("/warehouse/intake",{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{a.reset(),w.value=!1,S.get("/warehouse",{},{preserveScroll:!0})},onError:()=>{h.value=!1}})}finally{h.value=!1}},R=p=>{const e=p.target;a.photo=e.files&&e.files.length?e.files[0]:null},G=[{title:"Warehouse",href:"/warehouse"}],k=f(!1),g=f(null),b=f(!1),J=de(()=>{const p=g.value;return p===null?"-":c.data.find(o=>o.id===p)?.shipment?.shipment_code??"-"}),Q=p=>{g.value=p,k.value=!0},X=async()=>{g.value&&(b.value=!0,S.delete(`/warehouse/${g.value}`,{preserveScroll:!0,onSuccess:()=>{k.value=!1,g.value=null,b.value=!1,S.get("/warehouse",{},{preserveScroll:!0})},onError:()=>{b.value=!1}}))},$=()=>{const p={};x.value&&(p.q=x.value),y.value&&(p.per_page=y.value),S.get("/warehouse",p,{preserveState:!0,replace:!0})},Y=()=>{x.value="",y.value=v.items.per_page??10,$()};let F=null;return se(x,()=>{F&&window.clearTimeout(F),F=window.setTimeout(()=>$(),500)}),(p,e)=>(u(),d(C,null,[l(t(le),{title:"Warehouse Inventory"}),l(xe,{breadcrumbs:G},{default:r(()=>[s("div",be,[s("div",we,[e[10]||(e[10]=s("div",null,[s("h1",{class:"text-3xl font-bold"},"Warehouse Inventory"),s("p",{class:"text-muted-foreground"},"Manage items in the warehouse")],-1)),l(t(m),{onClick:e[0]||(e[0]=o=>w.value=!0)},{default:r(()=>[l(t(ye),{class:"mr-2 h-4 w-4"}),e[9]||(e[9]=n(" Add Intake ",-1))]),_:1})]),l(t(pe),null,{default:r(()=>[l(t(me),null,{default:r(()=>[l(t(fe),null,{default:r(()=>[...e[11]||(e[11]=[n("Inventory",-1)])]),_:1}),l(t(_e),null,{default:r(()=>[...e[12]||(e[12]=[n("Items received into warehouse",-1)])]),_:1})]),_:1}),s("div",ke,[T(s("input",{type:"search","onUpdate:modelValue":e[1]||(e[1]=o=>x.value=o),onKeyup:oe($,["enter"]),placeholder:"Search warehouse...",class:"rounded border px-3 py-2 w-64"},null,544),[[re,x.value]]),T(s("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>y.value=o),class:"rounded border px-3 py-2"},[...e[13]||(e[13]=[s("option",{value:10},"10",-1),s("option",{value:25},"25",-1),s("option",{value:50},"50",-1),s("option",{value:100},"100",-1)])],512),[[j,y.value,void 0,{number:!0}]]),l(t(m),{onClick:$},{default:r(()=>[...e[14]||(e[14]=[n("Apply",-1)])]),_:1}),l(t(m),{variant:"outline",onClick:Y},{default:r(()=>[...e[15]||(e[15]=[n("Clear",-1)])]),_:1})]),l(t(ce),{class:"pb-8"},{default:r(()=>[s("div",$e,[s("table",Ce,[e[17]||(e[17]=s("thead",null,[s("tr",{class:"border-b border-border bg-muted/50"},[s("th",{class:"px-4 py-3 font-medium"},"Shipment"),s("th",{class:"px-4 py-3 font-medium"},"Shelf"),s("th",{class:"px-4 py-3 font-medium"},"Photo"),s("th",{class:"px-4 py-3 font-medium"},"Intake By"),s("th",{class:"px-4 py-3 font-medium"},"Intake Time"),s("th",{class:"px-4 py-3 font-medium text-right"},"Actions")])],-1)),s("tbody",null,[(u(!0),d(C,null,U(t(c).data,o=>(u(),d("tr",{key:o.id,class:"border-b border-border hover:bg-muted/30 transition-colors"},[s("td",Se,i(o.shipment?.shipment_code||"-"),1),s("td",Ve,i(o.shelf||"-"),1),s("td",Pe,[o.photo_url?(u(),d("div",Ie,[s("img",{src:o.photo_url,class:"h-12 w-auto rounded cursor-pointer hover:opacity-80 transition-opacity",alt:"photo",onClick:Z=>K(o.photo_url)},null,8,Fe)])):(u(),d("div",Te,i(o.photo_path?"View":"-"),1))]),s("td",Ue,i(o.intake_by?.name||"-"),1),s("td",De,i(new Date(o.intake_time||o.created_at).toLocaleString()),1),s("td",qe,[l(t(z),{href:`/warehouse/${o.id}/edit`},{default:r(()=>[l(t(m),{variant:"outline",size:"sm"},{default:r(()=>[l(t(he),{class:"h-4 w-4"})]),_:1})]),_:1},8,["href"]),l(t(m),{variant:"destructive",size:"sm",onClick:Z=>Q(o.id)},{default:r(()=>[l(t(ge),{class:"h-4 w-4"})]),_:1},8,["onClick"])])]))),128)),t(c).data.length===0?(u(),d("tr",Ee,[...e[16]||(e[16]=[s("td",{colspan:"6",class:"px-4 py-8 text-center text-muted-foreground"},"No items found.",-1)])])):_("",!0)])])]),t(c).last_page>1?(u(),d("div",Ne,[s("div",We,"Showing "+i(t(c).data.length)+" of "+i(t(c).total)+" items",1),s("div",Ae,[(u(!0),d(C,null,U(t(c).links,o=>(u(),ae(t(z),{key:o.label,href:o.url||"#",class:ne(["px-3 py-1 rounded border",o.active?"bg-primary text-primary-foreground border-primary":"bg-background border-border hover:bg-muted",o.url?"":"opacity-50 cursor-not-allowed"]),disabled:!o.url},{default:r(()=>[n(i(o.label.replace(/«|»/g,"")),1)]),_:2},1032,["href","class","disabled"]))),128))])])):_("",!0)]),_:1})]),_:1}),l(t(D),{open:w.value,"onUpdate:open":e[6]||(e[6]=o=>w.value=o)},{default:r(()=>[l(t(q),{class:"sm:max-w-2xl"},{default:r(()=>[l(t(E),null,{default:r(()=>[l(t(N),null,{default:r(()=>[...e[18]||(e[18]=[n("Warehouse Intake",-1)])]),_:1})]),_:1}),s("div",Be,[s("div",je,[s("div",ze,[s("div",Me,[l(t(V),null,{default:r(()=>[...e[19]||(e[19]=[n("Customer",-1)])]),_:1}),T(s("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>t(a).customer_id=o),class:"w-full rounded border px-3 py-2"},[e[20]||(e[20]=s("option",{value:""},"Select customer",-1)),(u(!0),d(C,null,U(t(O),o=>(u(),d("option",{key:o.id,value:o.id},i(o.name),9,Le))),128))],512),[[j,t(a).customer_id]]),t(a).errors.customer_id?(u(),d("p",Oe,i(t(a).errors.customer_id),1)):_("",!0)]),s("div",Ke,[l(t(V),null,{default:r(()=>[...e[21]||(e[21]=[n("Supplier Name",-1)])]),_:1}),l(t(M),{modelValue:t(a).supplier_name,"onUpdate:modelValue":e[4]||(e[4]=o=>t(a).supplier_name=o)},null,8,["modelValue"]),t(a).errors.supplier_name?(u(),d("p",He,i(t(a).errors.supplier_name),1)):_("",!0)]),s("div",Re,[l(t(V),null,{default:r(()=>[...e[22]||(e[22]=[n("Weight",-1)])]),_:1}),l(t(M),{modelValue:t(a).weight,"onUpdate:modelValue":e[5]||(e[5]=o=>t(a).weight=o),type:"number"},null,8,["modelValue"]),t(a).errors.weight?(u(),d("p",Ge,i(t(a).errors.weight),1)):_("",!0)]),s("div",Je,[l(t(V),null,{default:r(()=>[...e[23]||(e[23]=[n("Photo",-1)])]),_:1}),s("input",{type:"file",accept:"image/*",onChange:R,class:"w-full rounded border px-3 py-2"},null,32),t(a).errors.photo?(u(),d("p",Qe,i(t(a).errors.photo),1)):_("",!0)])])])]),l(t(W),null,{default:r(()=>[l(t(A),{"as-child":""},{default:r(()=>[l(t(m),{disabled:h.value,onClick:ue(H,["prevent"])},{default:r(()=>[n(i(h.value?"Submitting...":"Receive Parcel"),1)]),_:1},8,["disabled"]),l(t(m),{variant:"secondary"},{default:r(()=>[...e[24]||(e[24]=[n("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),l(t(D),{open:k.value,"onUpdate:open":e[7]||(e[7]=o=>k.value=o)},{default:r(()=>[l(t(q),{class:"sm:max-w-md"},{default:r(()=>[l(t(E),{class:"space-y-3"},{default:r(()=>[l(t(N),null,{default:r(()=>[...e[25]||(e[25]=[n("Delete item",-1)])]),_:1}),l(t(ve),null,{default:r(()=>[...e[26]||(e[26]=[n("Are you sure you want to remove this item from inventory? This action cannot be undone.",-1)])]),_:1})]),_:1}),s("div",Xe,[s("p",null,[e[27]||(e[27]=s("strong",null,"Item:",-1)),n(" "+i(J.value),1)])]),l(t(W),{class:"gap-2 mt-4"},{default:r(()=>[l(t(A),{"as-child":""},{default:r(()=>[l(t(m),{variant:"secondary"},{default:r(()=>[...e[28]||(e[28]=[n("Cancel",-1)])]),_:1})]),_:1}),l(t(m),{variant:"destructive",disabled:b.value,onClick:X},{default:r(()=>[n(i(b.value?"Deleting...":"Delete"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"]),l(t(D),{open:P.value,"onUpdate:open":e[8]||(e[8]=o=>P.value=o)},{default:r(()=>[l(t(q),{class:"sm:max-w-2xl"},{default:r(()=>[l(t(E),null,{default:r(()=>[l(t(N),null,{default:r(()=>[...e[29]||(e[29]=[n("Item Photo",-1)])]),_:1})]),_:1}),s("div",Ye,[I.value?(u(),d("img",{key:0,src:I.value,class:"max-w-full max-h-96 rounded",alt:"Full size photo"},null,8,Ze)):_("",!0)]),l(t(W),null,{default:r(()=>[l(t(A),{"as-child":""},{default:r(()=>[l(t(m),{variant:"secondary"},{default:r(()=>[...e[30]||(e[30]=[n("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])])]),_:1})],64))}});export{yt as default};
