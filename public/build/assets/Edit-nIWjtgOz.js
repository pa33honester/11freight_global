import{d as P,k as D,c as f,a as s,u as t,h as w,w as a,b as n,g as u,n as y,o as p,F as E,r as N,t as _,q as b,e as R,j as $}from"./app-C3z3C6Qr.js";import{_ as v}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-D_iRLGtp.js";import{_ as k,a as A,b as U,c as O}from"./CardTitle.vue_vue_type_script_setup_true_lang-CPR_LB69.js";import{_ as T,a as B,b as F,c as J,d as G}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DJPMFO6a.js";import{_ as I,a as M}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DG5op2Cc.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-B0moNGY1.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-BkK2wAS4.js";import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-DW9BdHvg.js";import"./useForwardPropsEmits-DnUITS-n.js";import"./index-CmcRMKc_.js";import"./useForwardExpose-BJNPGo-H.js";import"./VisuallyHidden-Vvtas9GG.js";import"./index-BsePJUay.js";import"./createLucideIcon-CnvI7Wr1.js";const q={class:"p-4"},L={class:"grid gap-4"},z=["value"],H={class:"flex flex-col space-y-2"},K={class:"flex flex-col space-y-2"},Q={class:"flex flex-col space-y-2"},W={class:"flex gap-2"},me=P({__name:"Edit",props:{payment:{},customers:{}},setup(x){const c=x,r=c.payment,V=c.customers,l=D({customer_id:String(r.customer_id),reference_code:r.reference_code,amount:String(r.amount),status:r.status}),i=$(!1),d=$(!1),C=async()=>{if(l.status&&l.status!==r.status&&["APPROVED","REJECTED"].includes(String(l.status))){d.value=!0;return}i.value=!0,await l.put(`/payments/${r.id}`,{preserveScroll:!0}),i.value=!1},S=async()=>{i.value=!0,await l.put(`/payments/${r.id}`,{preserveScroll:!0}),i.value=!1,d.value=!1};return(X,e)=>(p(),f(E,null,[s(t(w),{title:"Edit Payment"}),s(j,{breadcrumbs:[{title:"Payments",href:"/payments"},{title:"Edit"}]},{default:a(()=>[n("div",q,[s(t(k),null,{default:a(()=>[s(t(A),null,{default:a(()=>[s(t(U),null,{default:a(()=>[...e[5]||(e[5]=[u("Edit Payment",-1)])]),_:1})]),_:1}),s(t(O),null,{default:a(()=>[n("div",L,[n("div",null,[s(t(m),null,{default:a(()=>[...e[6]||(e[6]=[u("Customer",-1)])]),_:1}),y(n("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>t(l).customer_id=o),class:"w-full rounded border px-3 py-2"},[e[7]||(e[7]=n("option",{value:""},"Select customer",-1)),(p(!0),f(E,null,N(t(V),o=>(p(),f("option",{key:o.id,value:o.id},_(o.full_name),9,z))),128))],512),[[b,t(l).customer_id]])]),n("div",H,[s(t(m),null,{default:a(()=>[...e[8]||(e[8]=[u("Reference",-1)])]),_:1}),s(t(g),{modelValue:t(l).reference_code,"onUpdate:modelValue":e[1]||(e[1]=o=>t(l).reference_code=o)},null,8,["modelValue"])]),n("div",K,[s(t(m),null,{default:a(()=>[...e[9]||(e[9]=[u("Amount",-1)])]),_:1}),s(t(g),{modelValue:t(l).amount,"onUpdate:modelValue":e[2]||(e[2]=o=>t(l).amount=o),type:"number",step:"0.01"},null,8,["modelValue"])]),n("div",Q,[s(t(m),null,{default:a(()=>[...e[10]||(e[10]=[u("Status",-1)])]),_:1}),y(n("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>t(l).status=o),class:"w-full rounded border px-3 py-2"},[...e[11]||(e[11]=[n("option",{value:"PENDING"},"PENDING",-1),n("option",{value:"APPROVED"},"APPROVED",-1),n("option",{value:"REJECTED"},"REJECTED",-1)])],512),[[b,t(l).status]])]),n("div",W,[s(t(v),{disabled:i.value,onClick:R(C,["prevent"])},{default:a(()=>[...e[12]||(e[12]=[u("Save",-1)])]),_:1},8,["disabled"])])])]),_:1})]),_:1})]),s(t(T),{open:d.value,"onUpdate:open":e[4]||(e[4]=o=>d.value=o)},{default:a(()=>[s(t(B),{class:"sm:max-w-md"},{default:a(()=>[s(t(F),null,{default:a(()=>[s(t(J),null,{default:a(()=>[...e[13]||(e[13]=[u("Confirm status change",-1)])]),_:1}),s(t(G),null,{default:a(()=>[e[14]||(e[14]=u("Changing the payment status to ",-1)),n("strong",null,_(t(l).status),1),e[15]||(e[15]=u(" is irreversible. Are you sure?",-1))]),_:1})]),_:1}),s(t(I),{class:"gap-2 mt-4"},{default:a(()=>[s(t(M),{"as-child":""},{default:a(()=>[s(t(v),{variant:"secondary"},{default:a(()=>[...e[16]||(e[16]=[u("Cancel",-1)])]),_:1})]),_:1}),s(t(v),{variant:"destructive",disabled:i.value,onClick:S},{default:a(()=>[u(_(i.value?"Saving...":"Confirm"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{me as default};
