import{d as P,k as D,c as f,a as s,u as t,h as w,w as a,b as o,g as u,n as y,o as p,F as E,r as N,t as _,q as b,e as R,j as $}from"./app-ZoMEvklz.js";import{_ as v}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CSrLiVPg.js";import{_ as k,a as A,b as U,c as O}from"./CardTitle.vue_vue_type_script_setup_true_lang-FJdKs83x.js";import{_ as T,a as B,b as F,c as J}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BUng5hS9.js";import{_ as G,a as I}from"./DialogFooter.vue_vue_type_script_setup_true_lang-BRSR6aJy.js";import{_ as M}from"./DialogDescription.vue_vue_type_script_setup_true_lang-n_4U53fr.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-B8cJiyck.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-DGRFnD30.js";import{_ as j}from"./AppLayout.vue_vue_type_script_setup_true_lang-D_gnfnQh.js";import"./useForwardPropsEmits-CGUFY8cM.js";import"./index-CsgO9ZAL.js";import"./useForwardExpose-CuBcqR0n.js";import"./VisuallyHidden-BGncnRsO.js";import"./index-n1LTNkzM.js";import"./createLucideIcon-Db4teo7l.js";const q={class:"p-4"},L={class:"grid gap-4"},z=["value"],H={class:"flex flex-col space-y-2"},K={class:"flex flex-col space-y-2"},Q={class:"flex flex-col space-y-2"},W={class:"flex gap-2"},fe=P({__name:"Edit",props:{payment:{},customers:{}},setup(x){const c=x,r=c.payment,V=c.customers,l=D({customer_id:String(r.customer_id),reference_code:r.reference_code,amount:String(r.amount),status:r.status}),i=$(!1),d=$(!1),C=async()=>{if(l.status&&l.status!==r.status&&["APPROVED","REJECTED"].includes(String(l.status))){d.value=!0;return}i.value=!0,await l.put(`/payments/${r.id}`,{preserveScroll:!0}),i.value=!1},S=async()=>{i.value=!0,await l.put(`/payments/${r.id}`,{preserveScroll:!0}),i.value=!1,d.value=!1};return(X,e)=>(p(),f(E,null,[s(t(w),{title:"Edit Payment"}),s(j,{breadcrumbs:[{title:"Payments",href:"/payments"},{title:"Edit"}]},{default:a(()=>[o("div",q,[s(t(k),null,{default:a(()=>[s(t(A),null,{default:a(()=>[s(t(U),null,{default:a(()=>[...e[5]||(e[5]=[u("Edit Payment",-1)])]),_:1})]),_:1}),s(t(O),null,{default:a(()=>[o("div",L,[o("div",null,[s(t(m),null,{default:a(()=>[...e[6]||(e[6]=[u("Customer",-1)])]),_:1}),y(o("select",{"onUpdate:modelValue":e[0]||(e[0]=n=>t(l).customer_id=n),class:"w-full rounded border px-3 py-2"},[e[7]||(e[7]=o("option",{value:""},"Select customer",-1)),(p(!0),f(E,null,N(t(V),n=>(p(),f("option",{key:n.id,value:n.id},_(n.full_name),9,z))),128))],512),[[b,t(l).customer_id]])]),o("div",H,[s(t(m),null,{default:a(()=>[...e[8]||(e[8]=[u("Reference",-1)])]),_:1}),s(t(g),{modelValue:t(l).reference_code,"onUpdate:modelValue":e[1]||(e[1]=n=>t(l).reference_code=n)},null,8,["modelValue"])]),o("div",K,[s(t(m),null,{default:a(()=>[...e[9]||(e[9]=[u("Amount",-1)])]),_:1}),s(t(g),{modelValue:t(l).amount,"onUpdate:modelValue":e[2]||(e[2]=n=>t(l).amount=n),type:"number",step:"0.01"},null,8,["modelValue"])]),o("div",Q,[s(t(m),null,{default:a(()=>[...e[10]||(e[10]=[u("Status",-1)])]),_:1}),y(o("select",{"onUpdate:modelValue":e[3]||(e[3]=n=>t(l).status=n),class:"w-full rounded border px-3 py-2"},[...e[11]||(e[11]=[o("option",{value:"PENDING"},"PENDING",-1),o("option",{value:"APPROVED"},"APPROVED",-1),o("option",{value:"REJECTED"},"REJECTED",-1)])],512),[[b,t(l).status]])]),o("div",W,[s(t(v),{disabled:i.value,onClick:R(C,["prevent"])},{default:a(()=>[...e[12]||(e[12]=[u("Save",-1)])]),_:1},8,["disabled"])])])]),_:1})]),_:1})]),s(t(T),{open:d.value,"onUpdate:open":e[4]||(e[4]=n=>d.value=n)},{default:a(()=>[s(t(B),{class:"sm:max-w-md"},{default:a(()=>[s(t(F),null,{default:a(()=>[s(t(J),null,{default:a(()=>[...e[13]||(e[13]=[u("Confirm status change",-1)])]),_:1}),s(t(M),null,{default:a(()=>[e[14]||(e[14]=u("Changing the payment status to ",-1)),o("strong",null,_(t(l).status),1),e[15]||(e[15]=u(" is irreversible. Are you sure?",-1))]),_:1})]),_:1}),s(t(G),{class:"gap-2 mt-4"},{default:a(()=>[s(t(I),{"as-child":""},{default:a(()=>[s(t(v),{variant:"secondary"},{default:a(()=>[...e[16]||(e[16]=[u("Cancel",-1)])]),_:1})]),_:1}),s(t(v),{variant:"destructive",disabled:i.value,onClick:S},{default:a(()=>[u(_(i.value?"Saving...":"Confirm"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{fe as default};
